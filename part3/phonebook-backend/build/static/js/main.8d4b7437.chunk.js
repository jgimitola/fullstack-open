(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(20),s=n.n(c),o=n(11),i=n(4),u=n(3),d=(n(25),n(6)),b=n.n(d),j="http://localhost:3001/api/persons",h={getAll:function(){return b.a.get(j).then((function(e){return e.data}))},create:function(e){return b.a.post(j,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e){return b.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))}},l=n(0),f=function(e){var t=e.filter,n=e.handleChangeFilter;return Object(l.jsx)("div",{children:Object(l.jsxs)("p",{children:["filter shown with:",Object(l.jsx)("input",{type:"search",value:t,onChange:n})]})})},m=function(e){var t=e.newName,n=e.newNumber,r=e.handleChangeName,a=e.handleChangeNumber,c=e.handleSubmit;return Object(l.jsxs)("form",{onSubmit:c,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:r})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:n,onChange:a})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.id,n=e.name,r=e.number,a=e.stateModifiers,c=e.persons,s=e.showErrorMessage,o=a.setPersons,u=a.setFilteredPersons;return Object(l.jsxs)("p",{children:[n," ",r,Object(l.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("Delete ".concat(n,"?"))&&h.remove(t).then((function(){var e=c.filter((function(e){return e.id!==t}));o(e),u(Object(i.a)(e))})).catch((function(){s("Information of ".concat(n," has already been removed from the server."))}))},children:"Delete"})]})},p=function(e){var t=e.filteredPersons,n=e.stateModifiers,r=e.persons,a=e.showErrorMessage;return Object(l.jsx)("div",{children:t.map((function(e){var t=e.id,c=e.name,s=e.number;return Object(l.jsx)(O,{id:t,name:c,number:s,stateModifiers:n,persons:r,showErrorMessage:a},t)}))})},v=function(e){var t=e.type,n=e.message;return n?Object(l.jsx)("p",{className:"error"===t?"error":"success",children:n}):null},g=function(){var e=Object(r.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(u.a)(c,2),d=s[0],b=s[1],j=Object(r.useState)([]),O=Object(u.a)(j,2),g=O[0],x=O[1],w=Object(r.useState)([]),C=Object(u.a)(w,2),S=C[0],N=C[1],M=Object(r.useState)(""),P=Object(u.a)(M,2),y=P[0],F=P[1],k=Object(r.useState)(""),E=Object(u.a)(k,2),D=E[0],I=E[1],T=Object(r.useState)(""),L=Object(u.a)(T,2),A=L[0],B=L[1];Object(r.useEffect)((function(){h.getAll().then((function(e){x(e),N(e)}))}),[]);var J=function(e){a(e),setTimeout((function(){a(null)}),2500)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(v,{type:"success",message:n}),Object(l.jsx)(v,{type:"error",message:d}),Object(l.jsx)(f,{filter:A,handleChangeFilter:function(e){var t=e.target.value;t.length>0?N(g.filter((function(e){return e.name.toLowerCase().includes(t)}))):N(Object(i.a)(g)),B(t)}}),Object(l.jsx)("h2",{children:"add a new"}),Object(l.jsx)(m,{newName:y,newNumber:D,handleChangeName:function(e){F(e.target.value)},handleChangeNumber:function(e){I(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=g.findIndex((function(e){return e.name===y}));if(-1===t){var n={name:y,number:D,id:g.length+1};h.create(n).then((function(){var e=[].concat(Object(i.a)(g),[n]);x(e),N(Object(i.a)(e)),B(""),J("".concat(n.name," has been added."))}))}else if(window.confirm("".concat(y," is already added to phonebook, replace the old number with a new one?"))){var r=Object(o.a)(Object(o.a)({},g[t]),{},{number:D});h.update(r).then((function(e){var t=g.map((function(e){return e.id!==r.id?e:r}));x(t),N(Object(i.a)(t)),B(""),J("".concat(r.name,"'s number has been updated."))}))}F(""),I("")}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(p,{filteredPersons:S,persons:g,stateModifiers:{setPersons:x,setFilteredPersons:N},showErrorMessage:function(e){b(e),setTimeout((function(){b(null)}),2500)}})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),x()}},[[45,1,2]]]);
//# sourceMappingURL=main.8d4b7437.chunk.js.map